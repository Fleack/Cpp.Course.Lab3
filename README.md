# ЛАБОРАТОРНАЯ РАБОТА №3

**Тема:** Библиотека физических тел

---

## 1. Задание

Реализовать библиотеку `body_core`, описывающую набор простых жёстких тел в 3D (шар, параллелепипед, цилиндр).

Описать общий интерфейс жёсткого тела и несколько конкретных реализаций.

Реализовать класс «мир», который хранит коллекцию тел и умеет вычислять агрегированные характеристики (например, суммарную массу, суммарный объём, среднюю массу, среднюю плотность, минимальные и максимальные значения и т.д.). Коллизию и взаимодействие тел реализовывать не нужно!

Написать консольное приложение `body_cli`, которое:

- добавляет тела по аргументам командной строки;
- выводит список тел;
- выводит простую статистику по миру;
- обрабатывает некорректные аргументы без UB.

Покрыть реализовынный функционал юнит-тестами к библиотеке.

---

## 2. Функциональные требования

---

### 2.1. Пространства имён и базовые классы

Вся библиотека помещается в пространство имён `lab3::body`:

### 2.2. Библиотека body_core

Все классы объявляются в заголовочных файлах и реализуются в соответствующих `.cpp` файлах.

**Требования:**

- Базовый класс `RigidBody` должен предоставлять виртуальный интерфейс для получения характеристик тел (масса, объём и т.д.);
- Каждый класс тела должен корректно вычислять свои физические характеристики;
- Класс `World` должен хранить коллекцию тел;
- Класс `World` должен уметь вычислять следующие агрегированные характеристики:
  - суммарная масса всех тел;
  - суммарный объём всех тел;
  - средняя масса (суммарная масса / количество тел);
  - средняя плотность (суммарная масса / суммарный объём);
  - минимальная и максимальная масса среди всех тел;
  - минимальный и максимальный объём среди всех тел;

### 2.3. Консольное приложение body_cli

Приложение должно предоставлять команды для работы с миром тел.

#### Команды

```
body_cli add sphere RADIUS DENSITY
body_cli add box WIDTH HEIGHT DEPTH DENSITY
body_cli add cylinder RADIUS HEIGHT DENSITY
body_cli list
body_cli stats
```

#### Описание команд

| Команда                              | Действие                                                                                                                                                                      |
|--------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `add sphere RADIUS DENSITY`          | Добавить шар с заданным радиусом и плотностью                                                                                                                                 |
| `add box WIDTH HEIGHT DEPTH DENSITY` | Добавить параллелепипед с заданными размерами и плотностью                                                                                                                    |
| `add cylinder RADIUS HEIGHT DENSITY` | Добавить цилиндр с заданными радиусом, высотой и плотностью                                                                                                                   |
| `list`                               | Вывести список всех тел в мире с их параметрами                                                                                                                               |
| `stats`                              | Вывести статистику: количество тел, суммарная масса, суммарный объём, средняя масса, средняя плотность, минимальные и максимальные значения, пр. параметры на ваше усмотрение |

#### Примеры

```
$ body_cli add sphere 1.0 2.5
Added sphere: r=1.0, density=2.5

$ body_cli add box 2.0 2.0 2.0 1.0
Added parallelepiped: 2.0x2.0x2.0, density=1.0

$ body_cli list
1. Sphere: r=1.0, density=2.5
2. Parallelepiped: 2.0x2.0x2.0, density=1.0

$ body_cli stats
Bodies: 2
Total mass: 18.472...
Total volume: 12.188...
Average mass: 9.236...
Average density: 1.515...
Min mass: 8.0
Max mass: 10.472...
Min volume: 4.189...
Max volume: 8.0
```

---

## 3. Ограничения

- Разрешено использование контейнеров STL;
- Коллизии и физическое взаимодействие тел реализовывать не требуется!

---

## 4. Подсказки

<details>
<summary><b>Раскрывать только после завершения ЛР для самопроверки!</b></summary>

### Структура проекта

- `.hpp` — только объявления;
- `.cpp` — определения;
- отдельная библиотека `body_core`;
- отдельное приложение `body_cli`.

### Технические моменты

- `#pragma once`;
- виртуальный деструктор в базовом классе;
- использование списков инициализации в конструкторах;
- передавать неизменяемые данные по `const&`;

### Что изучить дополнительно

- виртуальные функции и полиморфизм;
- правило трёх/пяти/нуля;
- работа с контейнерами STL и умными указателями.

</details>
